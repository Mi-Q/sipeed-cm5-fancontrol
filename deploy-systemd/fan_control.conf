# Sipeed CM5 Fan Control Configuration

# Fan control mode: "auto" or "manual"
# - auto: Automatically adjust fan speed based on temperature
# - manual: Set fan to a fixed speed percentage
MODE=auto

# Manual mode fan speed (0-100)
# Only used when MODE=manual
MANUAL_SPEED=50

# Auto mode temperature thresholds (Celsius)
# Only used when MODE=auto
TEMP_LOW=45
TEMP_HIGH=60

# Auto mode fan speed percentages (0-100)
# Only used when MODE=auto
FAN_SPEED_LOW=30
FAN_SPEED_HIGH=100

# Minimum operating fan speed (percentage)
# Noctua PWM fans typically work well down to 20% duty cycle
# Many fans don't spin below this threshold. This setting ensures the fan
# either stays off (0%) or runs at minimum operating speed or higher.
# If calculated speed falls between 0 and this value, it will snap to either
# 0% (if temp <= FAN_STOP_TEMP) or this minimum value (if temp > FAN_STOP_TEMP)
FAN_MIN_OPERATING_SPEED=30

# Temperature threshold for fan stop (Celsius)
# Below this temperature, fan will be completely off (0%)
# Above this temperature, fan will run at minimum FAN_MIN_OPERATING_SPEED or higher
# Set to 0 to disable automatic fan stop (fan always runs at minimum speed)
# Noctua fans: Set to 0 to keep fan running continuously at 30%
FAN_STOP_TEMP=0

# Fan curve type: "linear", "exponential", or "step"
# Only used when MODE=auto
# - linear: Fan speed increases proportionally with temperature
# - exponential: Fan speed increases slowly at low temps, rapidly at high temps (quieter)
# - step: Fan speed changes in discrete steps with hysteresis (most predictable)
FAN_CURVE=exponential

# Step mode configuration (only used when FAN_CURVE=step)
# Temperature zones and corresponding fan speeds (comma-separated)
# Format: temp1:speed1,temp2:speed2,temp3:speed3,...
# Example: 35:0,45:30,55:60,65:100 means:
#   - Below 35째C: 0% fan
#   - 35-45째C: 30% fan
#   - 45-55째C: 60% fan
#   - 55-65째C: 100% fan
STEP_ZONES=35:0,45:30,55:60,65:100

# Hysteresis for step mode (degrees Celsius)
# Prevents rapid speed changes near zone boundaries
# Temperature must change by this amount to trigger a zone change
STEP_HYSTERESIS=2

# PWM frequency (Hz)
# Standard 4-pin PWM fans: 25000 Hz (25 kHz, Intel PWM specification)
# Older/simple fans: 50 Hz
# Note: Not all GPIO libraries support high frequencies in containers
PWM_FREQUENCY=25000

# PWM signal inversion for NanoCluster board
# The NanoCluster board uses an open-drain MOSFET configuration:
# - true: Invert PWM (0% = 100% speed, 100% = 0% speed) - REQUIRED for NanoCluster
# - false: Normal PWM (0% = 0% speed, 100% = 100% speed) - For standard PWM boards
# Default: true (NanoCluster hardware)
PWM_INVERTED=true
